"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[25402],{705533:(e,i,l)=>{var n;l.r(i),l.d(i,{default:()=>s});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DebugSignalsFeedback_pin",selections:[{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debAds",plural:!0,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"backgroundColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"iconUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"signalId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"signalMessage",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debContentQuality",plural:!0,selections:n,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debInclusiveProduct",plural:!0,selections:n,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debShopping",plural:!0,selections:n,storageKey:null},{alias:null,args:null,concreteType:"SignalDecisionDict",kind:"LinkedField",name:"debTrustAndSafety",plural:!0,selections:n,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};t.hash="06530ceab8fc1bb7b5d868c8ffeb2afd";let s=t},343902:(e,i,l)=>{l.d(i,{N:()=>r,Z:()=>s});var n=l(883119),t=l(785893);function s({children:e,fullWidth:i}){return(0,t.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:i?"100%":void 0}},"data-test-id":"pointer-events-wrapper",children:e})}function r({children:e,enabled:i}){return i?(0,t.jsx)(s,{children:e}):e}},361747:(e,i,l)=>{l.d(i,{Z:()=>r});var n=l(883119),t=l(140017),s=l(785893);function r({height:e,isDenseView:i,rounding:l,width:r,color:a}){let o=(0,t.ZP)();return(0,s.jsx)(n.xu,{alignItems:"center",color:a||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:l,width:r,children:(0,s.jsxs)(n.kC,{alignItems:"center",direction:"column",children:[(0,s.jsx)(n.xu,{paddingY:i?2:4,children:(0,s.jsx)(n.JO,{accessibilityLabel:o.bt("Pin not available", "Pin not available", "story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel", undefined, true),color:"default",icon:"alert",size:20})}),(0,s.jsx)(n.xv,{weight:"bold",children:o.bt("Unavailable", "Unavailable", "story-pin.Closeup.UnavailableIdeaPin.Unavailable", undefined, true)}),!i&&(0,s.jsx)(n.xu,{paddingY:1,children:(0,s.jsx)(n.xv,{children:o.bt("Removed by the creator", "Removed by the creator", "story-pin.Closeup.UnavailableIdeaPin.Removed", undefined, true)})})]})})}},325362:(e,i,l)=>{l.d(i,{Z:()=>n});function n(e){return e.replace(/[_.-](\w|$)/g,(e,i)=>i.toUpperCase())}},158838:(e,i,l)=>{l.d(i,{Q6:()=>t,ZP:()=>r,t2:()=>s});let n=()=>!window?.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x",t=()=>{let e;let i="undefined"!=typeof window?window.navigator?.connection?.effectiveType:void 0,l=n();return i?"4g"===i?e="40-80":(l="1x",e="0-1"):e="unknown",{downloadSpeedGroup:e,screenDimension:l}};function s({vEXP3:e,vEXP4:i,vEXP5:l,vEXP6:n,vEXP7:s,v720P:r}){let{downloadSpeedGroup:a,screenDimension:o}=t(),d={"1x":e,"2x":l},c={"1x":s,"2x":s};return({unknown:d,"0-1":d,"1-5":{"1x":i,"2x":l},"5-10":{"1x":l,"2x":l},"10-20":{"1x":n,"2x":n},"20-40":c,"40-80":c,"80_or_above":c})[a][o]||r||void 0}function r(e){let{vHLSV3MOBILE:i,...l}=e,n=s(l),t=i||void 0;return n?{hlsv3:t,mp4:n}:{hlsv3:t}}},446653:(e,i,l)=>{l.d(i,{r:()=>m,K:()=>b});var n=l(667294),t=l(342513),s=l(340523),r=l(995917),a=l(149722),o=l(998577),d=l(573810),c=l(325362);let u=e=>{let i={};for(let l in e)Object.prototype.hasOwnProperty.call(e,l)&&("object"!=typeof e[l]||null===e[l]||Array.isArray(e[l])?i[(0,c.Z)(l)]=e[l]:i[(0,c.Z)(l)]=u(e[l]));return i},h=(e,i)=>{let l=[];for(let n in e)n!==i&&l.push({id:n,...u(e[n])});let n=l.sort(({user:{businessName:e}},{user:{businessName:i}})=>e.localeCompare(i)),t=new Map;for(let e of n)t.set(e.id,e);return t},_={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},g=(e,i)=>{switch(i.type){case"LOAD_PROFILES":return{...e,profiles:i.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:i.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:i.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:i.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:i.payload};default:return e}},p=({dispatch:e,isEnabled:i,state:l})=>{let{orbacVisibility:t,disableProfileChanger:s,headerVisible:r}=l,a=(0,n.useCallback)(l=>{i&&e({type:"SET_ACTIVE_PROFILE",payload:l})},[i,e]),o=(0,n.useCallback)(l=>{i&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:l??!t})},[i,e,t]),d=(0,n.useCallback)(l=>{i&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:l??!s})},[i,e,s]),c=(0,n.useCallback)(l=>{i&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:l??!r})},[i,e,r]);return{changeProfile:a,toggleORBACVisibility:o,toggleDisableProfileChanger:d,toggleHeaderVisibility:c}},x=e=>{let[i,l]=(0,n.useReducer)(g,_),t=p({dispatch:l,isEnabled:e,state:i}),{activeProfile:s,orbacVisibility:r}=i;(0,n.useEffect)(()=>{let e=(0,d.qn)("orbacActiveProfile",!1);e&&l({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,n.useEffect)(()=>{let e=(0,d.qn)("orbacVisibilty",!1);e&&l({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,n.useEffect)(()=>{(0,d.Nh)("orbacVisibility",r)},[r]),(0,n.useEffect)(()=>{(0,d.Nh)("orbacActiveProfile",s)},[s]);let a=(0,n.useCallback)((e,i)=>{l({type:"LOAD_PROFILES",payload:h(e,i)})},[l]);return{state:i,actions:t,receiveProfiles:a}};var f=l(785893);let{Provider:y,useMaybeHook:b}=(0,t.Z)("RoleBasedAccessControlContext"),m=({children:e})=>{let i;let{checkExperiment:l}=(0,s.F)(),t=(0,a.Z)(),d=!!(t.isAuth&&t.isPartner&&l("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:u,receiveProfiles:h}=x(d),{activeProfile:_,headerVisible:g,profiles:p=[]}=c,b=p?Array.from(p.values()):[],m=(0,o.Z)(b),j=!!t.isAuth&&b.length>0&&m,v=t.isAuth?t.id:"",A=t.isAuth?t.username:"",{changeProfile:P,toggleORBACVisibility:w,toggleDisableProfileChanger:I,toggleHeaderVisibility:E}=u;(0,n.useEffect)(()=>{if(d){if("string"==typeof m){P(m);return}_||P(v)}},[m,v,d,P,_]),(0,n.useEffect)(()=>{d&&(j&&!g&&E(!0),!j&&g&&E(!1))},[E,j,d,g,p]);let{data:S}=(0,r.Z)(d?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),C=S?.profiles;t&&t.isAuth&&c.activeProfile===t.id?i={id:t.id,permissions:["OWNER"],user:{username:A,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:_&&c.profiles&&(i=c.profiles.get(_)),(0,n.useEffect)(()=>{C&&h(C,v)},[h,C,v]);let k=c.profiles?Array.from(c.profiles.values()):[];return(0,f.jsx)(y,{value:{profiles:k,headerVisible:c.headerVisible,activeProfile:i,changeProfile:P,toggleORBACVisibility:w,toggleDisableProfileChanger:I,toggleHeaderVisibility:E},children:e})}},785059:(e,i,l)=>{l.d(i,{Z:()=>r});var n=l(340523),t=l(446653),s=l(998577);let r=()=>{let{checkExperiment:e}=(0,n.F)(),i=(0,t.K)(),{activeProfile:l}=i||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,a=(0,s.Z)(i?.profiles||[]),{anyEnabled:o}=e("useorbacroutematcher_in_useorbacactingas");return r&&(!o||a)&&l&&(l.viewerMeetsMfaRequirement||(l.permissions||[]).includes("OWNER"))?l:Object.freeze({})}},998577:(e,i,l)=>{l.d(i,{Z:()=>o});var n=l(616550),t=l(96157),s=l(340523),r=l(149722),a=l(19447);let o=e=>{let i=(0,n.TH)(),l=(0,r.Z)(),o=(0,a.S6)(),{anyEnabled:d}=(0,s.F)().checkExperiment("web_m10n_business_access_orbac_www"),c=(0,n.$B)("/:username"),u=c?.params?.username,h=(0,n.$B)("/pin/:id"),_=!!h?.params?.id&&o(h.params.id)?.pinner?.id;if((0,t.ej)(i))return!1;if((0,t.RU)(i))return!0;if((0,t.mY)(i))return d;let g=e.concat(l.isAuth?{user:{username:l.username},id:l.id}:{}).find(e=>{let{user:i={},id:l}=e||{},{username:n}=i;return(!!n&&!!u||!!_&&!!l)&&(n===u||_===l)});return!!g&&g.id}},199677:(e,i,l)=>{l.d(i,{D3:()=>d,DX:()=>a,KY:()=>c,Ms:()=>n,N1:()=>u,_P:()=>r,lJ:()=>s,nl:()=>t,q6:()=>o});let n=(e,i)=>{let l=e&&e.isAuth?e.username:"";return e&&i&&i.user&&i.user.username&&(l=i.user.username),l},t=(e,i)=>!!(i&&i.user&&e&&e.isAuth&&i.id!==e.id?i.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,i)=>e&&e.isAuth&&i&&i.id&&i.id!==e.id?i.id:"",r=(e,i,l)=>l&&l.user&&i&&i.isAuth&&l.id!==i.id?l.user.merchantId:e.advertiser?.merchant_id,a=(e,i,l)=>l&&l.user&&e.isAuth&&l.id!==e.id?l.user.scheduledPinCount||0:e.isAuth&&i&&i.scheduled_pin_count||0,o=(e,i,l)=>{let n=e&&e.isAuth&&l&&l.id&&l.id!==e.id&&l.id===i;return!!n},d=(e,i,l)=>{let n=o(e,i,l)||e&&e.isAuth&&i===e.id;return!!n},c=(e,i,l)=>{let n=i&&i.owner&&i.owner.id||"";return d(e,n,l)};function u(e,i,l){let n=i?i.id:"";return d(e,n,l)}},156032:(e,i,l)=>{l.d(i,{Z:()=>w});var n,t=l(667294);l(167912);var s=l(616550),r=l(883119),a=l(510989),o=l(207012),d=l(343902),c=l(608516),u=l(477458),h=l(149722),_=l(785893);let g=({signal:e,anchor:i,setShowFlyout:l,setStore:n})=>{let{hovered:t,onMouseEnter:s,onMouseLeave:a}=(0,u.Z)(),o=e=>{l(e=>!e),n(e)};return(0,_.jsx)(r.iP,{onMouseEnter:s,onMouseLeave:a,onTap:()=>o(e),rounding:"pill",children:(0,_.jsxs)(r.xu,{ref:i,alignItems:"center",color:t?"dark":"transparentDarkGray",display:"flex",padding:3,rounding:"pill",children:[(0,_.jsx)(r.xu,{alignItems:"center",color:"default",display:"flex",height:24,justifyContent:"center",marginEnd:1,minWidth:24,rounding:"circle",children:(0,_.jsx)(r.xu,{height:20,overflow:"hidden",rounding:"circle",width:20,children:(0,_.jsx)(r.Ee,{alt:"",color:e.backgroundColor??"",naturalHeight:1,naturalWidth:1,src:e.iconUrl??""})})}),(0,_.jsx)(r.xv,{color:"inverse",size:"200",weight:"bold",children:e.signalMessage})]})})};var p=l(107366),x=l(140017),f=l(13848),y=l(454514);function b(e){let i=(0,x.ZP)(),{onHide:l}=e,n=(0,_.jsx)(r.xv,{children:i.bt("Thank you for helping improve signal detection on Pinterest.", "Thank you for helping improve signal detection on Pinterest!", "pinRep.actionBar.signalDetector.toast", undefined, true)});return(0,_.jsx)(y.ZP,{onHide:l,text:n})}let m=function({anchor:e,onDismiss:i,pinId:l,signal:n}){let t=(0,x.ZP)(),s=(0,h.Z)(),{showOneToast:a}=(0,f.F9)();if(!s.isEmployee)return null;let{backgroundColor:o,iconUrl:d,signalId:c,signalMessage:u}=n;return(0,_.jsx)(r.mh,{children:(0,_.jsx)(r.J2,{anchor:e,idealDirection:"right",onDismiss:i,positionRelativeToAnchor:!1,size:"lg",children:(0,_.jsxs)(r.xu,{padding:4,width:"100%",children:[(0,_.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,_.jsx)(r.X6,{size:"400",children:t.bt("Signal detected:", "Signal detected:", "pinRep.actionBar.signalDetector.header", undefined, true)})}),(0,_.jsx)(r.xu,{paddingY:3,children:(0,_.jsxs)(r.kC,{alignItems:"center",gap:2,justifyContent:"center",children:[(0,_.jsx)(r.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:d?(0,_.jsx)(r.Ee,{alt:t.bt("Signal display", "Signal display", "pinRep.actionBar.signalDetector.signalAsset", undefined, true),color:"white",naturalHeight:1,naturalWidth:1,src:d}):(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:o??""}},height:40,width:40})}),(0,_.jsx)(r.xv,{size:"200",children:u})]})}),(0,_.jsx)(r.xu,{marginBottom:3,children:(0,_.jsx)(r.xv,{size:"200",children:t.bt("If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "pinRep.actionBar.signalDetector.instructions", undefined, true)})}),(0,_.jsxs)(r.kC,{alignItems:"center",gap:2,justifyContent:"start",children:[(0,_.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:()=>{(0,p.Z)({url:`/v3/pins/${l}/signal_request_review/`,method:"POST",data:{signal_id:c,user:s.id}}),i(),a(({hideToast:e})=>(0,_.jsx)(b,{onHide:e}))},size:"md",text:t.bt("Send for review", "Send for review", "pinRep.actionBar.signalDetector.button.review", undefined, true)}),(0,_.jsx)(r.zx,{color:"gray",fullWidth:!0,onClick:i,size:"md",text:t.bt("Cancel", "Cancel", "pinRep.actionBar.signalDetector.button.cancel", undefined, true)})]})]})})})};function j({signals:e,pinId:i}){let[l,n]=(0,t.useState)(!1),s=(0,t.useRef)(null),[o,u]=(0,t.useState)(e[0]);return(0,_.jsxs)(t.Fragment,{children:[(0,_.jsx)(a.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,_.jsx)(c.Z,{children:(0,_.jsx)(r.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,_.jsx)(d.Z,{children:(0,_.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",children:e.map(e=>(0,_.jsx)(r.xu,{marginEnd:2,children:(0,_.jsx)(g,{anchor:s,setShowFlyout:n,setStore:u,signal:e})},e.signalId))})})})})}),l&&(0,_.jsx)(m,{anchor:s.current,onDismiss:()=>n(!1),pinId:i,signal:o})]})}let v=function({anchor:e,onDismiss:i,pinId:l,signals:n}){let s=(0,x.ZP)(),[a,o]=(0,t.useState)(0),d=(0,h.Z)(),{showOneToast:c}=(0,f.F9)();if(!d.isEmployee)return null;let u=n.map(({signalMessage:e})=>({href:"#",text:e??""})),{backgroundColor:g,iconUrl:y,signalId:m,signalMessage:j}=n[a],v=({activeTabIndex:e})=>{o(e)};return(0,_.jsx)(r.mh,{children:(0,_.jsx)(r.J2,{anchor:e,idealDirection:"right",onDismiss:i,positionRelativeToAnchor:!1,size:"lg",children:(0,_.jsxs)(r.xu,{padding:4,width:"100%",children:[n.length>1&&(0,_.jsx)(r.xu,{marginBottom:4,overflow:"scrollX",padding:1,children:(0,_.jsx)(r.mQ,{activeTabIndex:a,onChange:({event:e,activeTabIndex:i,dangerouslyDisableOnNavigation:l})=>{e.preventDefault(),l(),v({activeTabIndex:i})},tabs:u})}),(0,_.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,_.jsx)(r.X6,{size:"400",children:s.bt("Signal detected:", "Signal detected:", "pinRep.actionBar.signalDetector.header", undefined, true)})}),(0,_.jsx)(r.xu,{paddingY:3,children:(0,_.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",children:[(0,_.jsx)(r.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:y?(0,_.jsx)(r.Ee,{alt:s.bt("Signal display", "Signal display", "pinRep.actionBar.signalDetector.signalAsset", undefined, true),color:"white",naturalHeight:1,naturalWidth:1,src:y}):(0,_.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:g??""}},height:40,width:40})}),(0,_.jsx)(r.xv,{size:"200",children:j})]})}),(0,_.jsx)(r.xu,{marginBottom:3,children:(0,_.jsx)(r.xv,{size:"200",children:s.bt("If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.", "pinRep.actionBar.signalDetector.instructions", undefined, true)})}),(0,_.jsxs)(r.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,_.jsx)(r.zx,{color:"red",fullWidth:!0,onClick:()=>{(0,p.Z)({url:`/v3/pins/${l}/signal_request_review/`,method:"POST",data:{signal_id:m,user:d.id}}),i(),c(({hideToast:e})=>(0,_.jsx)(b,{onHide:e}))},size:"md",text:s.bt("Send for review", "Send for review", "pinRep.actionBar.signalDetector.button.review", undefined, true)}),(0,_.jsx)(r.zx,{color:"gray",fullWidth:!0,onClick:i,size:"md",text:s.bt("Cancel", "Cancel", "pinRep.actionBar.signalDetector.button.cancel", undefined, true)})]})]})})})},A=void 0!==n?n:n=l(705533);function P({signals:e,pinId:i}){let{backgroundColor:l,iconUrl:n,signalMessage:s}=e[0],[o,h]=(0,t.useState)(!1),g=(0,t.useRef)();return(0,_.jsxs)(t.Fragment,{children:[(0,_.jsx)(a.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,_.jsx)(c.Z,{children:(0,_.jsx)(r.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,_.jsx)(d.Z,{children:(0,_.jsx)(u.q,{children:({hovered:e,onMouseEnter:i,onMouseLeave:t})=>(0,_.jsx)(r.iP,{onMouseEnter:i,onMouseLeave:t,onTap:()=>h(e=>!e),rounding:"pill",children:(0,_.jsxs)(r.xu,{ref:g,alignItems:"center",color:e?"dark":"transparentDarkGray",display:"flex",padding:3,rounding:"pill",children:[(0,_.jsx)(r.xu,{alignItems:"center",color:"default",display:"flex",height:24,justifyContent:"center",marginEnd:1,rounding:"circle",width:24,children:(0,_.jsx)(r.xu,{height:20,overflow:"hidden",rounding:"circle",width:20,children:(0,_.jsx)(r.Ee,{alt:"",color:l??"",naturalHeight:1,naturalWidth:1,src:n??""})})}),(0,_.jsx)(r.xv,{color:"inverse",size:"200",weight:"bold",children:s})]})})})})})})}),o&&g&&g.current&&(0,_.jsx)(v,{anchor:g.current,onDismiss:()=>h(!1),pinId:i,signals:e})]})}function w({pinKey:e}){let i=(0,o.Z)(A,e),l=(0,h.Z)(),{search:n}=(0,s.TH)(),r=(0,t.useMemo)(()=>new URLSearchParams(n),[n]);if(!l.isEmployee)return null;let{entityId:a,debAds:d,debContentQuality:c,debInclusiveProduct:u,debShopping:g,debTrustAndSafety:p}=i;if(d)return(0,_.jsx)(P,{pinId:a,signals:d});if(c)return(0,_.jsx)(P,{pinId:a,signals:c});if(u){if("skin_tone"===r.get("type")){let e=u.filter(e=>"visual_signals_hair_pattern_v1"!==e.signalId);return(0,_.jsx)(j,{pinId:a,signals:e})}{let e=u.filter(e=>"visual_body_analyses_v2_0"!==e.signalId);return(0,_.jsx)(j,{pinId:a,signals:e})}}return g?(0,_.jsx)(P,{pinId:a,signals:g}):p?(0,_.jsx)(P,{pinId:a,signals:p}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/25402.en_GB-b8f55d7fe94cf56a.mjs.map